Table of Content:

Tasks
	Category Management Task
	Mini Tasks
		Level 1 - 1, 2, 3
		Level 2 - 4, 5, 6
		Level 3 - 7, 8, 9
	Sample Solutions Outline
		Level 1â€“3 Robustness Tasks
		Category Management Task


# Tasks

---

## âœ… Category Management Task

---

## ğŸ“Œ Task Title

**Category Management with Dependency Check**

---

## ğŸ¯ Objective

Extend the existing application to support **Category CRUD** with a rule:

> **A category cannot be deleted if it is associated with any product.**

---

## ğŸ§© Functional Requirements

### 1. Category Entity

Use the `Category` model with:

* `id`
* `name`

---

### 2. Admin-Only Feature

* Only **Admin** can manage categories.
* URLs must be under:

  ```
  /admin/categories/*
  ```

---

### 3. Category Operations

#### âœ… View Categories

* Display all categories in a table
* Show:

  * ID
  * Name
  * Actions (Edit | Delete)

---

#### âœ… Add Category

* Form to add a new category
* Validate:

  * ID must be unique
  * Name cannot be empty

---

#### âœ… Update Category

* Edit category name
* ID must not change

---

#### âŒ Delete Category (With Constraint)

Before deleting a category:

* Check if **any product** is using that category
* If yes:

  * Do **not** delete
  * Show message:

    ```
    Category cannot be deleted because products are associated with it.
    ```

---

## ğŸ§  Business Rule (Core Learning)

```text
Category
   â†‘
Product
```

> **Parent data cannot be deleted if child data exists.**

This is exactly how **real databases behave**, implemented manually.

---

## ğŸ”§ Hints

* Store categories in `ServletContext`
* Products already exist â†’ reuse that list
* While deleting:

  * Loop through products
  * Compare category name or ID
* Use:

  * `request.setAttribute()` for error messages
  * `forward()` to show message

---

## ğŸ§  Concepts Tested

| Concept                    | Used |
| -------------------------- | ---- |
| ServletContext             | âœ…    |
| Filters & Authorization    | âœ…    |
| CRUD flow                  | âœ…    |
| Validation logic           | âœ…    |
| Forward vs Redirect        | âœ…    |
| JSTL conditional rendering | âœ…    |

---

## âœ… Expected Outcomes

* Categories page works fully
* Deletion is conditionally blocked
* App does **not break**
* UI shows proper messages

---

## ğŸ”¹ Mini Tasks to Make the Application More Robust

### ğŸŸ¢ Level 1: Very Easy (Everyone should do at least 2)

#### 1. JavaScript Validation on Forms

**Applies to:**

* Add Product
* Add Shopkeeper
* Add Category

**Rules:**

* Fields must not be empty
* Price must be a positive number
* Mobile number must be 10 digits

ğŸ‘‰ Uses: **JavaScript + HTML forms**

ğŸ§  Learning:

> Client-side validation improves UX.

---

#### 2. Prevent Duplicate ID (Server-Side)

**Applies to:**

* Product ID
* Shopkeeper ID
* Category ID

**Rule:**

* If ID already exists â†’ do not add
* Show error message on same page

ğŸ‘‰ Uses: **ServletContext + collections + forward**

---

#### 3. Trim & Normalize Input

**Applies to all forms**

**Rules:**

* Trim spaces from input
* Shopkeeper/Product/Category names should be stored in **Title Case**

ğŸ‘‰ Uses: `String.trim()`

---

## ğŸ”µ Level 2: Medium (Thinking + Integration)

#### 4. Disable Delete Button Conditionally

**Applies to:**

* Category list

**Rule:**

* If category is used by any product:

  * Disable Delete button
  * Or show text: *â€œIn useâ€*

ğŸ‘‰ Uses: **JSTL + conditional rendering**

---

#### 5. Show Counts in Dashboards

**Examples:**

* Admin Dashboard:

  * Total Shopkeepers
  * Total Categories
  * Total Products
* Sub-Admin Dashboard:

  * Total Products

ğŸ‘‰ Uses: **ServletContext + JSP EL**

---

#### 6. Confirmation Before Delete

**Applies to:**

* Delete Product
* Delete Shopkeeper
* Delete Category

**Implementation:**

* JavaScript `confirm()`

ğŸ‘‰ Uses: **JS + existing delete flow**

---

## ğŸ”¶ Level 3: Advanced but In-Scope

#### 7. Friendly Error Messages (One-Time)

**Rule:**

* Error messages should disappear after refresh
* Do not show old messages again

ğŸ‘‰ Hint:

* Use **request scope**, not session

---

#### 8. Search / Filter Products

**Features:**

* Search by name or category
* Filter list without DB

ğŸ‘‰ Uses:

* Request parameters
* In-memory filtering using loops

---

#### 9. Audit Logging (Optional)

**Log:**

* Username
* URL accessed
* Date & time

**Where:**

* Authentication / Authorization filter
* Or RequestListener

ğŸ‘‰ Uses: **Filter / Listener responsibility**

---

## ğŸ§  How to Assign This (Strong Recommendation)

You can say to students:

> â€œComplete **Category CRUD** (mandatory)
>
> * Pick **any TWO mini tasks** from the Level 1 list.â€

This:

* Prevents copying
* Encourages choice
* Makes evaluation fair

---

ğŸ§  What to do?

â€œComplete Category CRUD (mandatory)

Pick any TWO mini tasks from the Level 1 list.â€

Other levels are for your own practice, as to how far you wish to practice!

---

# ğŸ§© Sample Solutions Outline

*Level 1â€“3 Robustness Tasks*

---

## ğŸŸ¢ LEVEL 1 TASKS â€“ Solution Outline

### 1. JavaScript Validation on Forms

**Where**

* `add-product.jsp`
* `add-shopkeeper.jsp`
* `add-category.jsp`

**Approach**

* Add `onsubmit="return validateForm()"` to `<form>`
* Write `validateForm()` in:

  * inline `<script>` OR
  * common JS file (`js/validation.js`)

**Checks**

* Empty fields
* Price > 0
* Mobile = 10 digits

**Key Learning**

* Client-side validation improves UX
* Server-side validation still required

---

### 2. Prevent Duplicate ID (Server-Side)

**Where**

* Corresponding `Add*Servlet`

**Approach**

* Fetch list from `ServletContext`
* Loop through existing objects
* If ID already exists:

  * set error message in request
  * `forward()` back to same JSP

**Why `forward()`**

* To show error message on same form
* Avoid losing user input

---

### 3. Input Normalization

**Where**

* Servlet before creating object

**Approach**

* `trim()` all input values
* Convert category names to:

  * uppercase OR
  * title case

**Benefit**

* Avoids duplicate logical values
* Cleaner data storage

---

## ğŸ”µ LEVEL 2 TASKS â€“ Solution Outline

### 4. Disable Delete Button Conditionally

**Where**

* `categories.jsp`

**Approach**

* While looping categories:

  * check product list
  * see if category is used
* If used:

  * hide or disable Delete link
  * show text: â€œIn useâ€

**Tools**

* JSTL `<c:if>`
* Nested loop or helper flag

---

### 5. Show Counts in Dashboard

**Where**

* Dashboard servlets OR directly in JSP

**Approach**

* Get list sizes from `ServletContext`
* Set counts as request attributes
* Display using EL

**Example Counts**

* Total products
* Total categories
* Total shopkeepers

---

### 6. Delete Confirmation

**Where**

* Delete links (product/shopkeeper/category list)

**Approach**

* Add `onclick="return confirm('Are you sure?')"`

**Learning**

* Simple UX protection
* No backend change required

---

## ğŸ”¶ LEVEL 3 TASKS â€“ Solution Outline

### 7. One-Time Friendly Error Messages

**Where**

* Add/Edit/Delete servlets

**Approach**

* Use **request scope** for messages
* Display message in JSP
* Message disappears on refresh

**Avoid**

* Storing messages in session (causes repetition)

---

### 8. Product Search (In-Memory)

**Where**

* Products list servlet

**Approach**

* Accept `searchTerm` from request
* Loop through products
* Create filtered list
* Send filtered list to JSP

**UI**

* Simple search input above table

---

### 9. Activity Logging

**Where**

* Filter OR RequestListener

**Approach**

* Capture:

  * username (from session)
  * request URI
  * timestamp
* Print to console or file

**Learning**

* Cross-cutting concerns
* Centralized logging

---

# ğŸ“Œ Category Management Task

*(Detailed Hints + File Structure + URL Plan)*

---

## 1. Category Feature â€“ Big Picture

**Who can manage categories?**
ğŸ‘‰ **Admin only**

**Where does it fit?**
ğŸ‘‰ Along with Shopkeepers & Products (Admin responsibility)

---

## 2. URL Patterns (VERY IMPORTANT)

### Base URL

```
/admin/categories
```

### Full URL List

| Purpose         | URL                           |
| --------------- | ----------------------------- |
| View categories | `/admin/categories`           |
| Show add form   | `/admin/add-category` (GET)   |
| Add category    | `/admin/add-category` (POST)  |
| Show edit form  | `/admin/edit-category?id=1`   |
| Update category | `/admin/update-category`      |
| Delete category | `/admin/delete-category?id=1` |

ğŸ”’ These URLs are **already protected** by:

* Authentication Filter
* Authorization Filter (ADMIN role)

---

## 3. Project Structure (Exact)

### ğŸ“ Java Packages

```
src/main/java
â””â”€â”€ app.ecom
    â”œâ”€â”€ servlets
    â”‚   â””â”€â”€ admin
    â”‚       â”œâ”€â”€ CategoryListServlet.java
    â”‚       â”œâ”€â”€ AddCategoryServlet.java
    â”‚       â”œâ”€â”€ EditCategoryServlet.java
    â”‚       â”œâ”€â”€ UpdateCategoryServlet.java
    â”‚       â””â”€â”€ DeleteCategoryServlet.java
    â”‚
    â””â”€â”€ modals
        â””â”€â”€ Category.java
```

---

### ğŸ“ JSP Files

```
src/main/webapp/jsp/admin
â”œâ”€â”€ categories.jsp
â”œâ”€â”€ add-category.jsp
â””â”€â”€ edit-category.jsp
```

(Use common `header.jsp` and `footer.jsp`)

---

## 4. Category Model (Hint Only)

**Category.java**

* `id`
* `name`

ğŸ‘‰ Simple POJO with constructor + getters/setters

---

## 5. Storage Strategy (Critical Hint)

Categories must be stored in:

```
ServletContext
```

### Attribute Name (Tell them to use ONE name)

```
"categories"
```

Type:

```
List<Category>
```

ğŸ“Œ Initialize this list in **ServletContextListener**, just like products & shopkeepers.

---

## 6. categories.jsp (View Page) â€“ What It Should Do

**Purpose**

* Show all categories in table
* Show Add / Edit / Delete actions

**Columns**

* ID
* Name
* Actions

**Actions**

* Edit â†’ `/admin/edit-category?id=`
* Delete â†’ `/admin/delete-category?id=`

---

## 7. Add Category Flow (Hints)

### GET `/admin/add-category`

* Forward to `add-category.jsp`

### POST `/admin/add-category`

* Read id + name
* Trim input
* Check:

  * ID already exists?
* If error:

  * `request.setAttribute("error", "...")`
  * forward back to form
* Else:

  * add to list
  * redirect to `/admin/categories`

ğŸ§  Why redirect?
â†’ Avoid duplicate submission

---

## 8. Edit Category Flow (Hints)

### GET `/admin/edit-category`

* Read category ID
* Find category from list
* Set as request attribute
* Forward to `edit-category.jsp`

### POST `/admin/update-category`

* Update **name only**
* ID must remain unchanged
* Redirect to `/admin/categories`

---

## 9. Delete Category (MOST IMPORTANT PART)

### URL

```
/admin/delete-category?id=2
```

### Dependency Rule

> **Category cannot be deleted if any product is using it**

---

### How to Check (Step-by-Step Logic)

1. Fetch **products list** from `ServletContext`
2. Loop through products
3. If any productâ€™s category matches:

   * block delete
   * set error message
   * forward to `categories.jsp`
4. If no product uses it:

   * remove category
   * redirect to list

ğŸ§  This simulates **foreign key constraint** (without DB)

---

## 10. Error Message Handling (Hint)

* Use **request scope**
* Show error at top of `categories.jsp`
* Message should disappear on refresh

---

## 11. Optional UI Enhancement (Tell Them Optional)

* Disable Delete button if category is in use
* Show â€œIn useâ€ text instead

---

## ğŸ§  What This Task Tests

* ServletContext usage
* Cross-entity validation
* Forward vs Redirect
* Business rule enforcement
* MVC discipline

---