
# ğŸ§± Step-by-Step Build Plan

### Role-Based E-Commerce App (Sessions + Security, In-Memory)

---

## ğŸ”¹ STEP 0: Decide Scope & Rules (Mental Setup)

* No database
* In-memory data only
* Two roles: **ADMIN**, **SUB_ADMIN**
* Security via **Filters**
* User identity via **HttpSession**

ğŸ‘‰ This keeps the goal clear.

---

## ğŸ”¹ STEP 1: Project & Folder Setup

* Create Dynamic Web Project
* Configure Tomcat
* Create basic structure:

  * `/jsp/`
  * `/servlet/`
  * `/filter/`
  * `/model/`
* Create `login.jsp` and `error.jsp`

ğŸ‘‰ No logic yet, only structure.

---

## ğŸ”¹ STEP 2: Define Model Classes

Create simple POJOs:

* `User` (username, password, role)
* `Product`
* `Category`
* `Shopkeeper`

ğŸ‘‰ Just data holders, no logic.

---

## ğŸ”¹ STEP 3: In-Memory Data Initialization

* Create collections:

  * users list (admin + sub-admin)
  * products list
  * categories list
  * shopkeepers list
* Store them in **ServletContext**
* Initialize them at app startup

ğŸ‘‰ This replaces the database.

---

## ğŸ”¹ STEP 4: Login (Authentication)

* Create `LoginServlet`
* Read username & password
* Validate against in-memory users
* On success:

  * create `HttpSession`
  * store `username` and `role`
* Redirect to dashboard

ğŸ‘‰ User identity established.

---

## ğŸ”¹ STEP 5: Logout + Cache Control

* Create `LogoutServlet`
* Invalidate session
* Set cache-control headers
* Redirect to login page

ğŸ‘‰ Proper session cleanup.

---

## ğŸ”¹ STEP 6: Authentication Filter

* Create `AuthFilter`
* Intercept all protected URLs
* Check:

  * session exists?
  * user attribute present?
* If not â†’ redirect to login

ğŸ‘‰ No unauthenticated access.

---

## ğŸ”¹ STEP 7: Authorization Filter (Role Check)

* Extend filter logic
* Check user role from session
* Allow / deny based on URL pattern

  * `/admin/*`
  * `/subadmin/*`
* Redirect to access-denied page

ğŸ‘‰ Role-based security enforced.

---

## ğŸ”¹ STEP 8: Admin Functionalities

(Admin-only URLs)

* Add category
* Add / modify / delete shopkeepers
* View shopkeepers list
* View products list

ğŸ‘‰ Uses Servlet + JSP + JSTL.

---

## ğŸ”¹ STEP 9: Sub-Admin Functionalities

(Sub-admin-only URLs)

* Change own password
* Add / modify / delete products
* View product list

ğŸ‘‰ Role difference becomes visible.

---

## ğŸ”¹ STEP 10: JSP + JSTL Cleanup

* Replace scriptlets with JSTL where possible
* Use:

  * `<c:out>`
  * `<c:forEach>`
  * `<c:if>`
* Keep JSP as **view only**

ğŸ‘‰ MVC discipline reinforced.

---

## ğŸ”¹ STEP 11: End-to-End Flow Testing

* Try:

  * Access without login
  * Wrong role access
  * Logout + back button
* Verify filters & sessions work

ğŸ‘‰ Concepts fully validated.

---

## ğŸ§  Teaching Anchor (Very Important)

Use this sentence repeatedly:

> **Session answers â€œwho you areâ€, filter answers â€œwhat you can doâ€.**

---
